<html>
  <head>
    <script type="module" src="./web.bundle.min.js"></script>
    <style>
      /* Center the button */
      body {
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div>
      <h1 id="header" display="none">Rates</h1>
      <span id="rates">Fetching rates...</span>
    </div>
    <script type="module">
      import { TurboFactory } from './web.bundle.min.js';

      // set up our factory
      const turbo = TurboFactory.init();

      // print the client to the console
      console.log(turbo);

      const rates = await turbo.getRates();

      console.log(
        'Successfully fetched rates!',
        JSON.stringify(rates, null, 2),
      );

      // update the DOM
      const ratesString = Object.entries(rates['fiat'])
        .map(([key, value]) => {
          return `${key}: ${value}`;
        })
        .join('\n');
      document.getElementById('rates').innerText = ratesString;
      document.getElementById('header').style.display = 'block';
    </script>
  </body>
</html>
